{"version":3,"file":"gm.js","sources":["../../src/olgm/gm.js"],"sourcesContent":["/**\n * @module olgm/gm\n */\nimport LineString from 'ol/geom/LineString.js';\nimport Point from 'ol/geom/Point.js';\nimport Polygon from 'ol/geom/Polygon.js';\nimport MultiLineString from 'ol/geom/MultiLineString.js';\nimport MultiPolygon from 'ol/geom/MultiPolygon.js';\nimport MultiPoint from 'ol/geom/MultiPoint.js';\nimport {transform} from 'ol/proj.js';\nimport Circle from 'ol/style/Circle.js';\nimport Icon from 'ol/style/Icon.js';\nimport RegularShape from 'ol/style/RegularShape.js';\nimport {getStyleOf, getColor, getColorOpacity} from './util.js';\nimport {assert} from './asserts.js';\nimport MapLabel from './gm/MapLabel.js';\nimport MapIcon from './gm/MapIcon.js';\n\n\n/**\n * Create a Google Maps feature using an OpenLayers one.\n * @param {module:ol/Feature} feature feature to create\n * @param {module:ol/PluggableMap=} opt_ol3map For reprojection purpose. If undefined, then\n *     `EPSG:3857` is used.\n * @return {google.maps.Data.Feature} google Feature\n */\nexport function createFeature(feature, opt_ol3map) {\n  const geometry = /** @type {module:ol/geom/Geometry} */ (feature.getGeometry());\n  const gmapGeometry = createFeatureGeometry(geometry, opt_ol3map);\n  return new google.maps.Data.Feature({\n    geometry: gmapGeometry\n  });\n}\n\n\n/**\n * Create a Google Maps geometry using an OpenLayers one.\n * @param {module:ol/geom/Geometry} geometry geometry to create\n * @param {module:ol/PluggableMap=} opt_ol3map For reprojection purpose. If undefined, then\n *     `EPSG:3857` is used.\n * @return {google.maps.Data.Geometry|google.maps.LatLng}\n * google Geometry or LatLng\n */\nexport function createFeatureGeometry(geometry, opt_ol3map) {\n\n  let gmapGeometry = null;\n\n  if (geometry instanceof Point) {\n    gmapGeometry = createLatLng(geometry, opt_ol3map);\n  } else if (geometry instanceof MultiPoint ||\n             geometry instanceof LineString ||\n             geometry instanceof MultiLineString ||\n             geometry instanceof Polygon ||\n             geometry instanceof MultiPolygon) {\n    gmapGeometry = createGeometry(geometry, opt_ol3map);\n  }\n\n  assert(gmapGeometry !== null,\n    'Expected geometry to be module:ol/geom/Point|MultiPoint|LineString|MultiLineString|Polygon|MultiPolygon');\n\n  return gmapGeometry;\n}\n\n\n/**\n * Create a Google Maps LatLng object using an OpenLayers Point.\n * @param {module:ol/geom/Point|module:ol/coordinate~Coordinate} object coordinate to create\n * @param {module:ol/PluggableMap=} opt_ol3map For reprojection purpose. If undefined, then\n *     `EPSG:3857` is used.\n * @return {google.maps.LatLng} google LatLng object\n */\nexport function createLatLng(object, opt_ol3map) {\n  const inProj = (opt_ol3map !== undefined) ?\n    opt_ol3map.getView().getProjection() : 'EPSG:3857';\n  let coordinates;\n  if (object instanceof Point) {\n    coordinates = object.getCoordinates();\n  } else {\n    coordinates = object;\n  }\n  const lonLatCoords = transform(coordinates, inProj, 'EPSG:4326');\n  return new google.maps.LatLng(lonLatCoords[1], lonLatCoords[0]);\n}\n\n\n/**\n * Create a Google Maps LineString or Polygon object using an OpenLayers one.\n * @param {module:ol/geom/MultiPoint|module:ol/geom/LineString|module:ol/geom/Polygon|module:ol/geom/MultiLineString|module:ol/geom/MultiPolygon} geometry geometry to create\n * @param {module:ol/PluggableMap=} opt_ol3map For reprojection purpose. If undefined, then\n *     `EPSG:3857` is used.\n * @return {google.maps.Data.MultiPoint|google.maps.Data.LineString|google.maps.Data.MultiLineString|google.maps.Data.Polygon|google.maps.Data.MultiPolygon} google\n * LineString or Polygon\n */\nexport function createGeometry(geometry, opt_ol3map) {\n  const inProj = (opt_ol3map !== undefined) ?\n    opt_ol3map.getView().getProjection() : 'EPSG:3857';\n\n  let gmapGeometry = null;\n\n  if (geometry instanceof LineString) {\n    const lineStringlatLngs = genLatLngs_(\n      geometry.getCoordinates(),\n      inProj\n    );\n    gmapGeometry = new google.maps.Data.LineString(lineStringlatLngs);\n  } else if (geometry instanceof Polygon) {\n    const polygonlatLngs = genLatLngs_(\n      geometry.getCoordinates()[0],\n      inProj\n    );\n    gmapGeometry = new google.maps.Data.Polygon([polygonlatLngs]);\n  } else if (geometry instanceof MultiLineString) {\n    const multiLineStringlatLngs = genMultiLatLngs_(\n      geometry.getCoordinates(),\n      inProj\n    );\n    gmapGeometry = new google.maps.Data.MultiLineString(multiLineStringlatLngs);\n  } else if (geometry instanceof MultiPolygon) {\n    const multiPolygons = genMultiPolygon_(\n      geometry.getPolygons(),\n      inProj\n    );\n    gmapGeometry = new google.maps.Data.MultiPolygon(multiPolygons);\n  } else if (geometry instanceof MultiPoint) {\n    const multiPoints = genLatLngs_(\n      geometry.getCoordinates(),\n      inProj\n    );\n    gmapGeometry = new google.maps.Data.MultiPoint(multiPoints);\n  }\n\n  return gmapGeometry;\n}\n\n\n/**\n * Convert a list of OpenLayers coordinates to a list of google maps LatLng.\n *\n * @param {Array<module:ol/coordinate~Coordinate>} coordinates List of coordinate\n * @param {module:ol/proj~ProjectionLike=} opt_inProj Projection of the features.\n * @return {Array<google.maps.LatLng>} List of lat lng.\n * @private\n */\nexport function genLatLngs_(coordinates, opt_inProj) {\n  const inProj = opt_inProj || 'EPSG:3857';\n  const latLngs = [];\n  let lonLatCoords;\n  for (let i = 0, ii = coordinates.length; i < ii; i++) {\n    lonLatCoords = transform(coordinates[i], inProj, 'EPSG:4326');\n    latLngs.push(new google.maps.LatLng(lonLatCoords[1], lonLatCoords[0]));\n  }\n  return latLngs;\n}\n\n\n/**\n * Convert a list of OpenLayers multi-coordinates to a list of multi\n * google maps LatLng.\n *\n * @param {Array<Array<module:ol/coordinate~Coordinate>>} coordinates List of multi coordinate\n * @param {module:ol/proj~ProjectionLike=} opt_inProj Projection of the features.\n * @return {Array<Array<google.maps.LatLng>>} List of multi lat lng.\n * @private\n */\nexport function genMultiLatLngs_(coordinates, opt_inProj) {\n  const inProj = opt_inProj || 'EPSG:3857';\n  const multiLatLngs = [];\n  for (let i = 0, len = coordinates.length; i < len; i++) {\n    multiLatLngs.push(genLatLngs_(coordinates[i], inProj));\n  }\n  return multiLatLngs;\n}\n\n\n/**\n * Convert a list of OpenLayers polygons to a list of google maps polygons.\n *\n * @param {Array<module:ol/geom/Polygon>} polygons List of polygons.\n * @param {module:ol/proj~ProjectionLike=} opt_inProj Projection of the features.\n * @return {Array<google.maps.Data.Polygon>} List of polygons.\n * @private\n */\nexport function genMultiPolygon_(polygons, opt_inProj) {\n  const mutliPolygons = [];\n  for (let i = 0, len = polygons.length; i < len; i++) {\n    const latLgns = genMultiLatLngs_(polygons[i].getCoordinates(), opt_inProj);\n    const multiPolygon = new google.maps.Data.Polygon(latLgns);\n    mutliPolygons.push(multiPolygon);\n  }\n  return mutliPolygons;\n}\n\n\n// === Style ===\n\n\n/**\n * Create a Google Maps data style options from an OpenLayers object.\n * @param {module:ol/style/Style|module:ol/style/Style~StyleFunction|module:ol/layer/Vector|module:ol/Feature}\n * object style object\n * @param {module:olgm/gm/MapIcon~Options} mapIconOptions map icon options\n * @param {number=} opt_index index for the object\n * @return {?google.maps.Data.StyleOptions} google style options\n */\nexport function createStyle(object, mapIconOptions, opt_index) {\n  let gmStyle = null;\n  const style = getStyleOf(object);\n  if (style) {\n    gmStyle = createStyleInternal(style, mapIconOptions, opt_index);\n  }\n  return gmStyle;\n}\n\n\n/**\n * Create a Google Maps data style options from an OpenLayers style object.\n * @param {module:ol/style/Style} style style object\n * @param {module:olgm/gm/MapIcon~Options} mapIconOptions map icon options\n * @param {number=} opt_index index for the object\n * @return {google.maps.Data.StyleOptions} google style options\n */\nexport function createStyleInternal(style, mapIconOptions, opt_index) {\n\n  const gmStyle = /** @type {google.maps.Data.StyleOptions} */ ({});\n\n  // strokeColor\n  // strokeOpacity\n  // strokeWeight\n  const stroke = style.getStroke();\n  if (stroke) {\n    const strokeColor = stroke.getColor();\n    if (strokeColor) {\n      gmStyle['strokeColor'] = getColor(strokeColor);\n      const strokeOpacity = getColorOpacity(strokeColor);\n      if (strokeOpacity !== null) {\n        gmStyle['strokeOpacity'] = strokeOpacity;\n      }\n    }\n\n    const strokeWidth = stroke.getWidth();\n    if (strokeWidth) {\n      gmStyle['strokeWeight'] = strokeWidth;\n    }\n  }\n\n  // fillColor\n  // fillOpacity\n  const fill = style.getFill();\n  if (fill) {\n    const fillColor = fill.getColor();\n    if (fillColor) {\n      gmStyle['fillColor'] = getColor(fillColor);\n      const fillOpacity = getColorOpacity(fillColor);\n      if (fillOpacity !== null) {\n        gmStyle['fillOpacity'] = fillOpacity;\n      }\n    }\n  }\n\n  const image = style.getImage();\n  if (image) {\n\n    const gmIcon = {};\n    const gmSymbol = {};\n    const useCanvas = mapIconOptions.useCanvas !== undefined ?\n      mapIconOptions.useCanvas : false;\n\n    if (image instanceof Circle || image instanceof RegularShape) {\n      // --- module:ol/style/Circle ---\n      if (image instanceof Circle) {\n        gmSymbol['path'] = google.maps.SymbolPath.CIRCLE;\n      } else if (image instanceof RegularShape) {\n        // Google Maps support SVG Paths. We'll build one manually.\n        let path = 'M ';\n\n        // Get a few variables from the image style;\n        let nbPoints = image.getPoints();\n        const outerRadius = image.getRadius();\n        const innerRadius = image.getRadius2() !== undefined ?\n          image.getRadius2() : image.getRadius();\n        const size = 0.1;\n        const rotation = image.getRotation() + image.getAngle();\n\n        if (innerRadius == 0 && image.getRadius2() === undefined) {\n          nbPoints = nbPoints / 2;\n        }\n\n        if (innerRadius !== outerRadius) {\n          nbPoints = nbPoints * 2;\n        }\n\n        for (let i = 0; i < nbPoints; i++) {\n          const radius = i % 2 == 0 ? outerRadius : innerRadius;\n          const angle = (i * 2 * Math.PI / nbPoints) - (Math.PI / 2) + rotation;\n\n          const x = size * radius * Math.cos(angle);\n          const y = size * radius * Math.sin(angle);\n          path += x + ',' + y + ' ';\n        }\n\n        // Close the path\n        path += 'Z';\n        gmSymbol['path'] = path;\n      }\n\n      const imageStroke = image.getStroke();\n      if (imageStroke) {\n        const imageStrokeColor = imageStroke.getColor();\n        if (imageStrokeColor) {\n          gmSymbol['strokeColor'] = getColor(imageStrokeColor);\n        }\n\n        gmSymbol['strokeWeight'] = imageStroke.getWidth();\n      }\n\n      const imageFill = image.getFill();\n      if (imageFill) {\n        const imageFillColor = imageFill.getColor();\n        if (imageFillColor) {\n          gmSymbol['fillColor'] = getColor(imageFillColor);\n\n          const imageFillOpacity = getColorOpacity(imageFillColor);\n          if (imageFillOpacity !== null) {\n            gmSymbol['fillOpacity'] = imageFillOpacity;\n          } else {\n            // Google Maps default fill opacity of images is `0`. In ol3,\n            // it's `1`.\n            gmSymbol['fillOpacity'] = 1;\n          }\n        }\n      }\n\n      const imageRadius = image.getRadius();\n      if (imageRadius) {\n        gmSymbol['scale'] = imageRadius;\n      }\n    } else if (image instanceof Icon && !useCanvas) {\n      // --- module:ol/style/Icon ---\n\n      const imageSrc = image.getSrc();\n      if (imageSrc) {\n        gmSymbol['url'] = imageSrc;\n      }\n\n      const imageScale = image.getScale();\n\n      const imageAnchor = image.getAnchor();\n      if (imageAnchor) {\n        if (imageScale !== undefined) {\n          gmSymbol['anchor'] = new google.maps.Point(\n            imageAnchor[0] * imageScale, imageAnchor[1] * imageScale);\n        } else {\n          gmSymbol['anchor'] = new google.maps.Point(\n            imageAnchor[0], imageAnchor[1]);\n        }\n      }\n\n      const imageOrigin = image.getOrigin();\n      if (imageOrigin) {\n        gmSymbol['origin'] = new google.maps.Point(\n          imageOrigin[0], imageOrigin[1]);\n      }\n\n      const imageSize = image.getSize();\n      if (imageSize) {\n        gmSymbol['size'] = new google.maps.Size(imageSize[0], imageSize[1]);\n\n        if (imageScale !== undefined) {\n          gmSymbol['scaledSize'] = new google.maps.Size(\n            imageSize[0] * imageScale, imageSize[1] * imageScale);\n        }\n      }\n\n      // NOTE - google.maps.Icon does not support opacity\n    }\n\n    if (Object.keys(gmIcon).length) {\n      gmStyle['icon'] = /** @type {google.maps.Icon} */ (gmIcon);\n    } else if (Object.keys(gmSymbol).length) {\n      gmStyle['icon'] = /** @type {google.maps.Symbol} */ (gmSymbol);\n    }\n  }\n\n  // if, at this very last point, there aren't any style options that have\n  // been set, then tell Google Maps to render the feature invisible because\n  // we're dealing with an empty `module:ol/style/Style` object.\n  if (Object.keys(/** @type {!Object} */ (gmStyle)).length === 0) {\n    gmStyle['visible'] = false;\n  } else if (opt_index !== undefined) {\n    const zIndex = opt_index * 2;\n    gmStyle['zIndex'] = zIndex;\n  }\n\n  return gmStyle;\n}\n\n\n// === Label ===\n\n\n/**\n * Create a MapLabel object from a text style and Lat/Lng location.\n * @param {module:ol/style/Text} textStyle style for the text\n * @param {google.maps.LatLng} latLng position of the label\n * @param {number} index index for the label\n * @return {module:olgm/gm/MapLabel} map label\n */\nexport function createLabel(textStyle, latLng, index) {\n\n  const labelOptions = {\n    align: 'center',\n    position: latLng,\n    zIndex: index * 2 + 1\n  };\n\n  const text = textStyle.getText();\n  if (text) {\n    labelOptions['text'] = text;\n  }\n\n  const font = textStyle.getFont();\n  if (font) {\n    labelOptions['font'] = font;\n  }\n\n  const fill = textStyle.getFill();\n  if (fill) {\n    const fillColor = fill.getColor();\n    if (fillColor) {\n      labelOptions['fontColor'] = fillColor;\n    }\n  }\n\n  const stroke = textStyle.getStroke();\n  if (stroke) {\n    const strokeColor = stroke.getColor();\n    if (strokeColor) {\n      labelOptions['strokeColor'] = strokeColor;\n    }\n\n    const strokeWidth = stroke.getWidth();\n    if (strokeWidth) {\n      labelOptions['strokeWeight'] = strokeWidth;\n    }\n  }\n\n  const offsetX = textStyle.getOffsetX();\n  if (offsetX) {\n    labelOptions['offsetX'] = offsetX;\n  }\n\n  const offsetY = textStyle.getOffsetY();\n  if (offsetY) {\n    labelOptions['offsetY'] = offsetY;\n  }\n\n  const textAlign = textStyle.getTextAlign();\n  if (textAlign) {\n    labelOptions['textAlign'] = textAlign;\n  }\n\n  const textBaseline = textStyle.getTextBaseline();\n  if (textBaseline) {\n    labelOptions['textBaseline'] = textBaseline;\n  }\n\n  return new MapLabel(labelOptions);\n}\n\n\n/**\n * Create a mapIcon object from an image style and Lat/Lng location\n * @param {module:ol/style/Icon} iconStyle style for the icon\n * @param {google.maps.LatLng} latLng position of the label\n * @param {number} index index for the label\n * @return {module:olgm/gm/MapIcon} map icon\n */\nexport function createMapIcon(iconStyle, latLng, index) {\n\n  const iconOptions = {\n    align: 'center',\n    position: latLng,\n    zIndex: index * 2 + 1\n  };\n\n  return new MapIcon(iconStyle, iconOptions);\n}\n"],"names":["const","let"],"mappings":"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"}