{"version":3,"file":"MapLabel.js","sources":["../../../src/olgm/gm/MapLabel.js"],"sourcesContent":["/**\n * @module olgm/gm/MapLabel\n */\n/**\n * The following file was borrowed from the MapLabel project, which original\n * source code is available at:\n *\n *     https://github.com/googlemaps/js-map-label\n *\n * Here's a copy of its license:\n *\n * Copyright 2011 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Map Label.\n *\n * @author lukem@google.com (Luke Mahe)\n * @author cbro@google.com (Chris Broadfoot)\n *\n * Integration to OL3-Google-Maps:\n * @author adube@mapgears.com (Alexandre Dub√©)\n */\n\nimport MapElement from './MapElement.js';\n\n/**\n * @classdesc\n * @api\n */\nclass MapLabel extends MapElement {\n  /**\n   * Creates a new Map Label\n   * @param {Object<string, *>=} opt_options Optional properties to set.\n   */\n  constructor(opt_options) {\n    super();\n\n    this.set('font', 'normal 10px sans-serif');\n    this.set('textAlign', 'center');\n    this.set('textBaseline', 'middle');\n\n    this.set('zIndex', 1e3);\n\n    this.setValues(opt_options);\n  }\n\n\n  /**\n   * Note: mark as `@api` to make the minimized version include this method.\n   * @param {string} prop property\n   * @api\n   * @override\n   */\n  changed(prop) {\n    switch (prop) {\n      case 'fontColor':\n      case 'fontFamily':\n      case 'fontSize':\n      case 'fontWeight':\n      case 'strokeColor':\n      case 'strokeWeight':\n      case 'text':\n      case 'textAlign':\n      case 'textBaseline':\n        this.drawCanvas_();\n        break;\n      case 'maxZoom':\n      case 'minZoom':\n      case 'offsetX':\n      case 'offsetY':\n      case 'position':\n        this.draw();\n        break;\n      default:\n        break;\n    }\n  }\n\n\n  /**\n   * Draws the label to the canvas 2d context.\n   * @private\n   */\n  drawCanvas_() {\n    const canvas = this.canvas_;\n    if (!canvas) {\n      return;\n    }\n\n    const style = canvas.style;\n\n    const fillStyle = this.get('fontColor');\n    if (!fillStyle) {\n      return;\n    }\n\n    style.zIndex = /** @type {number} */ (this.get('zIndex'));\n\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.textBaseline = this.get('textBaseline');\n    ctx.strokeStyle = this.get('strokeColor');\n    ctx.fillStyle = fillStyle;\n    ctx.font = this.get('font');\n    ctx.textAlign = this.get('textAlign');\n\n    const text = this.get('text');\n    if (text) {\n      const x = canvas.width / 2;\n      const y = canvas.height / 2;\n\n      const strokeWeight = Number(this.get('strokeWeight'));\n      if (strokeWeight) {\n        ctx.lineWidth = strokeWeight;\n        ctx.strokeText(text, x, y);\n      }\n\n      ctx.fillText(text, x, y);\n    }\n  }\n\n\n  /**\n   * Note: mark as `@api` to make the minimized version include this method.\n   * @api\n   * @override\n   */\n  onAdd() {\n    const canvas = this.canvas_ = document.createElement('canvas');\n    const style = canvas.style;\n    style.position = 'absolute';\n\n    const ctx = canvas.getContext('2d');\n    ctx.lineJoin = 'round';\n\n    this.drawCanvas_();\n\n    const panes = this.getPanes();\n    if (panes) {\n      panes.markerLayer.appendChild(canvas);\n    }\n  }\n}\nexport default MapLabel;\n"],"names":["super","const"],"mappings":"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"}