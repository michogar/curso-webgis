{"version":3,"file":"ImageOverlay.js","sources":["../../../src/olgm/gm/ImageOverlay.js"],"sourcesContent":["/**\n * @module olgm/gm/ImageOverlay\n */\n/**\n * @classdesc\n * @api\n */\nclass ImageOverlay extends ((window.google && window.google.maps && google.maps.OverlayView) || Object) {\n  /**\n   * Creates a new image overlay.\n   * @param {string} src url to the image\n   * @param {Array<number>} size size of the image\n   * @param {google.maps.LatLng} topLeft topLeft corner\n   */\n  constructor(src, size, topLeft) {\n    super();\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.src_ = src;\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.size_ = size;\n\n    /**\n     * @type {google.maps.LatLng}\n     * @private\n     */\n    this.topLeft_ = topLeft;\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this.div_ = null;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.zIndex_ = 0;\n  }\n\n\n  /**\n   * Note: mark as `@api` to make the minimized version include this method.\n   * @api\n   * @override\n   */\n  onAdd() {\n    const div = document.createElement('div');\n    div.style.borderStyle = 'none';\n    div.style.borderWidth = '0px';\n    div.style.position = 'absolute';\n    div.style.zIndex = this.zIndex_;\n\n    // Create the img element and attach it to the div.\n    const img = document.createElement('img');\n    img.src = this.src_;\n    img.style.width = '100%';\n    img.style.height = '100%';\n    img.style.position = 'absolute';\n    div.appendChild(img);\n\n    this.div_ = div;\n\n    /**\n     * Add the element to the \"mapPane\" pane. Normally we would put it in the\n     * \"overlayLayer\" pane, but we want to be able to show it behind tile layers,\n     * so we place them together in the same pane.\n     */\n    const panes = this.getPanes();\n    panes.mapPane.appendChild(div);\n  }\n\n\n  /**\n   * Note: mark as `@api` to make the minimized version include this method.\n   * @api\n   * @override\n   */\n  draw() {\n    const div = this.div_;\n\n    const sizeX = this.size_[0];\n    const sizeY = this.size_[1];\n\n    div.style.width = sizeX + 'px';\n    div.style.height = sizeY + 'px';\n\n    const overlayProjection = this.getProjection();\n    const topLeftPx = overlayProjection.fromLatLngToDivPixel(this.topLeft_);\n\n    let offsetX = topLeftPx.x;\n    const offsetY = topLeftPx.y;\n\n    // Adjust bad calculations when the view is larger than the world\n    const worldWidth = overlayProjection.getWorldWidth();\n    if (worldWidth < sizeX) {\n      // Overlap of the map on each size\n      const mapOverlap = Math.floor(sizeX / worldWidth) / 2;\n\n      // For when only one map is overlapping\n      const factor = Math.max(mapOverlap, 1);\n\n      offsetX -= worldWidth * factor;\n    }\n\n    div.style.top = offsetY + 'px';\n    div.style.left = offsetX + 'px';\n  }\n\n\n  /**\n   * Set the zIndex for the div containing the image\n   * @param {number} zIndex zIndex to set\n   * @api\n   */\n  setZIndex(zIndex) {\n    this.zIndex_ = zIndex;\n    if (this.div_) {\n      this.div_.style.zIndex = zIndex;\n    }\n  }\n\n\n  /**\n   * Note: mark as `@api` to make the minimized version include this method.\n   * @api\n   * @override\n   */\n  onRemove() {\n    if (this.div_) {\n      this.div_.parentNode.removeChild(this.div_);\n      this.div_ = null;\n    }\n  }\n}\nexport default ImageOverlay;\n"],"names":["super","const","let"],"mappings":"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"}