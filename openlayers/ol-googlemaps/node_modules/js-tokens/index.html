



<!DOCTYPE html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="es">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Curso WebGIS. Mapas libres con Leaflet y OpenLayers</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../../../#overview" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../.." title="Curso WebGIS. Mapas libres con Leaflet y OpenLayers" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Curso WebGIS. Mapas libres con Leaflet y OpenLayers
              </span>
              <span class="md-header-nav__topic">
                Home
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/xeoinquedos/curso-webgis/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Curso WebGIS
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../.." title="Curso WebGIS. Mapas libres con Leaflet y OpenLayers" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Curso WebGIS. Mapas libres con Leaflet y OpenLayers
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/xeoinquedos/curso-webgis/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Curso WebGIS
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../1_creando_mapa/" title="1. Creando un mapa" class="md-nav__link">
      1. Creando un mapa
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../2_capas_base/" title="2. El mapa sin datos. Añadir una capa base" class="md-nav__link">
      2. El mapa sin datos. Añadir una capa base
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../3_mis_datos/" title="3. Mas allá de la capa base, añadiendo mis propios datos" class="md-nav__link">
      3. Mas allá de la capa base, añadiendo mis propios datos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../4_wms_wmts/" title="4. Y si los datos son enormes" class="md-nav__link">
      4. Y si los datos son enormes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../5_interactuando_mapa/" title="5. Interactuando con el mapa" class="md-nav__link">
      5. Interactuando con el mapa
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../6_osm_y_tilemill/" title="6. Usando OpenStreetMap como fuente de datos, Tilemill. Enlace a GeoTalleres" class="md-nav__link">
      6. Usando OpenStreetMap como fuente de datos, Tilemill. Enlace a GeoTalleres
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../7_extra_1_osm_y_umap/" title="7. Extra 1. Un visor rápido con datos vectoriales de OSM usando uMap" class="md-nav__link">
      7. Extra 1. Un visor rápido con datos vectoriales de OSM usando uMap
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/xeoinquedos/curso-webgis/edit/master/docs/openlayers/ol-googlemaps/node_modules/js-tokens/README.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="overview">Overview <a href="https://travis-ci.org/lydell/js-tokens"><img alt="Build Status" src="https://travis-ci.org/lydell/js-tokens.svg?branch=master" /></a></h1>
<p>A regex that tokenizes JavaScript.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">jsTokens</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;js-tokens&quot;</span><span class="p">).</span><span class="k">default</span>

<span class="kd">var</span> <span class="nx">jsString</span> <span class="o">=</span> <span class="s2">&quot;var foo=opts.foo;\n...&quot;</span>

<span class="nx">jsString</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">jsTokens</span><span class="p">)</span>
<span class="c1">// [&quot;var&quot;, &quot; &quot;, &quot;foo&quot;, &quot;=&quot;, &quot;opts&quot;, &quot;.&quot;, &quot;foo&quot;, &quot;;&quot;, &quot;\n&quot;, ...]</span>
</pre></div>
</td></tr></table>

<h1 id="installation">Installation</h1>
<p><code>npm install js-tokens</code></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="nx">jsTokens</span> <span class="nx">from</span> <span class="s2">&quot;js-tokens&quot;</span>
<span class="c1">// or:</span>
<span class="kd">var</span> <span class="nx">jsTokens</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;js-tokens&quot;</span><span class="p">).</span><span class="k">default</span>
</pre></div>
</td></tr></table>

<h1 id="usage">Usage</h1>
<h3 id="jstokens"><code>jsTokens</code></h3>
<p>A regex with the <code>g</code> flag that matches JavaScript tokens.</p>
<p>The regex <em>always</em> matches, even invalid JavaScript and the empty string.</p>
<p>The next match is always directly after the previous.</p>
<h3 id="var-token-matchtotokenmatch"><code>var token = matchToToken(match)</code></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span><span class="nx">matchToToken</span><span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;js-tokens&quot;</span>
<span class="c1">// or:</span>
<span class="kd">var</span> <span class="nx">matchToToken</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;js-tokens&quot;</span><span class="p">).</span><span class="nx">matchToToken</span>
</pre></div>
</td></tr></table>

<p>Takes a <code>match</code> returned by <code>jsTokens.exec(string)</code>, and returns a <code>{type:
String, value: String}</code> object. The following types are available:</p>
<ul>
<li>string</li>
<li>comment</li>
<li>regex</li>
<li>number</li>
<li>name</li>
<li>punctuator</li>
<li>whitespace</li>
<li>invalid</li>
</ul>
<p>Multi-line comments and strings also have a <code>closed</code> property indicating if the
token was closed or not (see below).</p>
<p>Comments and strings both come in several flavors. To distinguish them, check if
the token starts with <code>//</code>, <code>/*</code>, <code>'</code>, <code>"</code> or <code>`</code>.</p>
<p>Names are ECMAScript IdentifierNames, that is, including both identifiers and
keywords. You may use <a href="https://github.com/crissdev/is-keyword-js">is-keyword-js</a> to tell them apart.</p>
<p>Whitespace includes both line terminators and other whitespace.</p>
<h1 id="ecmascript-support">ECMAScript support</h1>
<p>The intention is to always support the latest stable ECMAScript version.</p>
<p>If adding support for a newer version requires changes, a new version with a
major verion bump will be released.</p>
<p>Currently, <a href="https://www.ecma-international.org/ecma-262/8.0/index.html">ECMAScript 2017</a> is supported.</p>
<h1 id="invalid-code-handling">Invalid code handling</h1>
<p>Unterminated strings are still matched as strings. JavaScript strings cannot
contain (unescaped) newlines, so unterminated strings simply end at the end of
the line. Unterminated template strings can contain unescaped newlines, though,
so they go on to the end of input.</p>
<p>Unterminated multi-line comments are also still matched as comments. They
simply go on to the end of the input.</p>
<p>Unterminated regex literals are likely matched as division and whatever is
inside the regex.</p>
<p>Invalid ASCII characters have their own capturing group.</p>
<p>Invalid non-ASCII characters are treated as names, to simplify the matching of
names (except unicode spaces which are treated as whitespace).</p>
<p>Regex literals may contain invalid regex syntax. They are still matched as
regex literals. They may also contain repeated regex flags, to keep the regex
simple.</p>
<p>Strings may contain invalid escape sequences.</p>
<h1 id="limitations">Limitations</h1>
<p>Tokenizing JavaScript using regexes—in fact, <em>one single regex</em>—won’t be
perfect. But that’s not the point either.</p>
<p>You may compare jsTokens with <a href="http://esprima.org/">esprima</a> by using <code>esprima-compare.js</code>.
See <code>npm run esprima-compare</code>!</p>
<h3 id="template-string-interpolation">Template string interpolation</h3>
<p>Template strings are matched as single tokens, from the starting <code>`</code> to the
ending <code>`</code>, including interpolations (whose tokens are not matched
individually).</p>
<p>Matching template string interpolations requires recursive balancing of <code>{</code> and
<code>}</code>—something that JavaScript regexes cannot do. Only one level of nesting is
supported.</p>
<h3 id="division-and-regex-literals-collision">Division and regex literals collision</h3>
<p>Consider this example:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="mf">9.82</span>
<span class="kd">var</span> <span class="nx">number</span> <span class="o">=</span> <span class="nx">bar</span> <span class="o">/</span> <span class="mi">2</span><span class="o">/</span><span class="nx">g</span>

<span class="kd">var</span> <span class="nx">regex</span> <span class="o">=</span> <span class="sr">/ 2/g</span>
</pre></div>
</td></tr></table>

<p>A human can easily understand that in the <code>number</code> line we’re dealing with
division, and in the <code>regex</code> line we’re dealing with a regex literal. How come?
Because humans can look at the whole code to put the <code>/</code> characters in context.
A JavaScript regex cannot. It only sees forwards.</p>
<p>When the <code>jsTokens</code> regex scans throught the above, it will see the following
at the end of both the <code>number</code> and <code>regex</code> rows:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="sr">/ 2/g</span>
</pre></div>
</td></tr></table>

<p>It is then impossible to know if that is a regex literal, or part of an
expression dealing with division.</p>
<p>Here is a similar case:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nx">foo</span> <span class="o">/=</span> <span class="mi">2</span><span class="o">/</span><span class="nx">g</span>
<span class="nx">foo</span><span class="p">(</span><span class="sr">/= 2/g</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>The first line divides the <code>foo</code> variable with <code>2/g</code>. The second line calls the
<code>foo</code> function with the regex literal <code>/= 2/g</code>. Again, since <code>jsTokens</code> only
sees forwards, it cannot tell the two cases apart.</p>
<p>There are some cases where we <em>can</em> tell division and regex literals apart,
though.</p>
<p>First off, we have the simple cases where there’s only one slash in the line:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="mi">2</span><span class="o">/</span><span class="nx">g</span>
<span class="nx">foo</span> <span class="o">/=</span> <span class="mi">2</span>
</pre></div>
</td></tr></table>

<p>Regex literals cannot contain newlines, so the above cases are correctly
identified as division. Things are only problematic when there are more than
one non-comment slash in a single line.</p>
<p>Secondly, not every character is a valid regex flag.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">number</span> <span class="o">=</span> <span class="nx">bar</span> <span class="o">/</span> <span class="mi">2</span><span class="o">/</span><span class="nx">e</span>
</pre></div>
</td></tr></table>

<p>The above example is also correctly identified as division, because <code>e</code> is not a
valid regex flag. I initially wanted to future-proof by allowing <code>[a-zA-Z]*</code>
(any letter) as flags, but it is not worth it since it increases the amount of
ambigous cases. So only the standard <code>g</code>, <code>m</code>, <code>i</code>, <code>y</code> and <code>u</code> flags are
allowed. This means that the above example will be identified as division as
long as you don’t rename the <code>e</code> variable to some permutation of <code>gmiyu</code> 1 to 5
characters long.</p>
<p>Lastly, we can look <em>forward</em> for information.</p>
<ul>
<li>If the token following what looks like a regex literal is not valid after a
  regex literal, but is valid in a division expression, then the regex literal
  is treated as division instead. For example, a flagless regex cannot be
  followed by a string, number or name, but all of those three can be the
  denominator of a division.</li>
<li>Generally, if what looks like a regex literal is followed by an operator, the
  regex literal is treated as division instead. This is because regexes are
  seldomly used with operators (such as <code>+</code>, <code>*</code>, <code>&amp;&amp;</code> and <code>==</code>), but division
  could likely be part of such an expression.</li>
</ul>
<p>Please consult the regex source and the test cases for precise information on
when regex or division is matched (should you need to know). In short, you
could sum it up as:</p>
<p>If the end of a statement looks like a regex literal (even if it isn’t), it
will be treated as one. Otherwise it should work as expected (if you write sane
code).</p>
<h1 id="license">License</h1>
<p><a href="LICENSE">MIT</a>.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.583bbe55.js"></script>
      
        
        
          
          <script src="../../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../../../../assets/javascripts/lunr/lunr.es.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../../.."}})</script>
      
    
    
      
    
  </body>
</html>