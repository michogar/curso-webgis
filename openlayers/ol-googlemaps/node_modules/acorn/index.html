



<!DOCTYPE html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="es">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Curso WebGIS. Mapas libres con Leaflet y OpenLayers</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../../../#acorn" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../.." title="Curso WebGIS. Mapas libres con Leaflet y OpenLayers" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Curso WebGIS. Mapas libres con Leaflet y OpenLayers
              </span>
              <span class="md-header-nav__topic">
                Acorn
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/xeoinquedos/curso-webgis/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Curso WebGIS
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../.." title="Curso WebGIS. Mapas libres con Leaflet y OpenLayers" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Curso WebGIS. Mapas libres con Leaflet y OpenLayers
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/xeoinquedos/curso-webgis/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Curso WebGIS
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../1_creando_mapa/" title="1. Creando un mapa" class="md-nav__link">
      1. Creando un mapa
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../2_capas_base/" title="2. El mapa sin datos. Añadir una capa base" class="md-nav__link">
      2. El mapa sin datos. Añadir una capa base
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../3_mis_datos/" title="3. Mas allá de la capa base, añadiendo mis propios datos" class="md-nav__link">
      3. Mas allá de la capa base, añadiendo mis propios datos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../4_wms_wmts/" title="4. Y si los datos son enormes" class="md-nav__link">
      4. Y si los datos son enormes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../5_interactuando_mapa/" title="5. Interactuando con el mapa" class="md-nav__link">
      5. Interactuando con el mapa
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../6_osm_y_tilemill/" title="6. Usando OpenStreetMap como fuente de datos, Tilemill. Enlace a GeoTalleres" class="md-nav__link">
      6. Usando OpenStreetMap como fuente de datos, Tilemill. Enlace a GeoTalleres
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../7_extra_1_osm_y_umap/" title="7. Extra 1. Un visor rápido con datos vectoriales de OSM usando uMap" class="md-nav__link">
      7. Extra 1. Un visor rápido con datos vectoriales de OSM usando uMap
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#community" title="Community" class="md-nav__link">
    Community
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#components" title="Components" class="md-nav__link">
    Components
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#main-parser" title="Main parser" class="md-nav__link">
    Main parser
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note-on-using-with-escodegen" title="Note on using with Escodegen" class="md-nav__link">
    Note on using with Escodegen
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#distacorn_loosejs" title="dist/acorn_loose.js" class="md-nav__link">
    dist/acorn_loose.js
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#distwalkjs" title="dist/walk.js" class="md-nav__link">
    dist/walk.js
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-interface" title="Command line interface" class="md-nav__link">
    Command line interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-system" title="Build system" class="md-nav__link">
    Build system
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plugins" title="Plugins" class="md-nav__link">
    Plugins
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#existing-plugins" title="Existing plugins" class="md-nav__link">
    Existing plugins
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/xeoinquedos/curso-webgis/edit/master/docs/openlayers/ol-googlemaps/node_modules/acorn/README.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="acorn">Acorn</h1>
<p><a href="https://travis-ci.org/acornjs/acorn"><img alt="Build Status" src="https://travis-ci.org/acornjs/acorn.svg?branch=master" /></a>
<a href="https://www.npmjs.com/package/acorn"><img alt="NPM version" src="https://img.shields.io/npm/v/acorn.svg" /></a>
<a href="https://cdnjs.com/libraries/acorn"><img alt="CDNJS" src="https://img.shields.io/cdnjs/v/acorn.svg" /></a><br />
<a href="https://marijnhaverbeke.nl/fund/">Author funding status: <img alt="maintainer happiness" src="https://marijnhaverbeke.nl/fund/status_s.png?force" /></a></p>
<p>A tiny, fast JavaScript parser, written completely in JavaScript.</p>
<h2 id="community">Community</h2>
<p>Acorn is open source software released under an
<a href="https://github.com/acornjs/acorn/blob/master/LICENSE">MIT license</a>.</p>
<p>You are welcome to
<a href="https://github.com/acornjs/acorn/issues">report bugs</a> or create pull
requests on <a href="https://github.com/acornjs/acorn">github</a>. For questions
and discussion, please use the
<a href="https://discuss.ternjs.net">Tern discussion forum</a>.</p>
<h2 id="installation">Installation</h2>
<p>The easiest way to install acorn is with <a href="https://www.npmjs.com/"><code>npm</code></a>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>npm install acorn
</pre></div>
</td></tr></table>

<p>Alternately, you can download the source and build acorn yourself:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>git clone https://github.com/acornjs/acorn.git
<span class="nb">cd</span> acorn
npm install
npm run build
</pre></div>
</td></tr></table>

<h2 id="components">Components</h2>
<p>When run in a CommonJS (node.js) or AMD environment, exported values
appear in the interfaces exposed by the individual files, as usual.
When loaded in the browser (Acorn works in any JS-enabled browser more
recent than IE5) without any kind of module management, a single
global object <code>acorn</code> will be defined, and all the exported properties
will be added to that.</p>
<h3 id="main-parser">Main parser</h3>
<p>This is implemented in <code>dist/acorn.js</code>, and is what you get when you
<code>require("acorn")</code> in node.js.</p>
<p><strong>parse</strong><code>(input, options)</code> is used to parse a JavaScript program.
The <code>input</code> parameter is a string, <code>options</code> can be undefined or an
object setting some of the options listed below. The return value will
be an abstract syntax tree object as specified by the
<a href="https://github.com/estree/estree">ESTree spec</a>.</p>
<p>When  encountering   a  syntax   error,  the   parser  will   raise  a
<code>SyntaxError</code> object with a meaningful  message. The error object will
have a <code>pos</code> property that indicates the character offset at which the
error occurred,  and a <code>loc</code>  object that contains a  <code>{line, column}</code>
object referring to that same position.</p>
<ul>
<li><strong>ecmaVersion</strong>: Indicates the ECMAScript version to parse. Must be
  either 3, 5, 6 (2015), 7 (2016), 8 (2017), 9 (2018) or 10 (2019, partial
  support). This influences support for strict mode, the set of
  reserved words, and support for new syntax features. Default is 7.</li>
</ul>
<p><strong>NOTE</strong>: Only 'stage 4' (finalized) ECMAScript features are being
  implemented by Acorn.</p>
<ul>
<li>
<p><strong>sourceType</strong>: Indicate the mode the code should be parsed in. Can be
  either <code>"script"</code> or <code>"module"</code>. This influences global strict mode
  and parsing of <code>import</code> and <code>export</code> declarations.</p>
</li>
<li>
<p><strong>onInsertedSemicolon</strong>: If given a callback, that callback will be
  called whenever a missing semicolon is inserted by the parser. The
  callback will be given the character offset of the point where the
  semicolon is inserted as argument, and if <code>locations</code> is on, also a
  <code>{line, column}</code> object representing this position.</p>
</li>
<li>
<p><strong>onTrailingComma</strong>: Like <code>onInsertedSemicolon</code>, but for trailing
  commas.</p>
</li>
<li>
<p><strong>allowReserved</strong>: If <code>false</code>, using a reserved word will generate
  an error. Defaults to <code>true</code> for <code>ecmaVersion</code> 3, <code>false</code> for higher
  versions. When given the value <code>"never"</code>, reserved words and
  keywords can also not be used as property names (as in Internet
  Explorer's old parser).</p>
</li>
<li>
<p><strong>allowReturnOutsideFunction</strong>: By default, a return statement at
  the top level raises an error. Set this to <code>true</code> to accept such
  code.</p>
</li>
<li>
<p><strong>allowImportExportEverywhere</strong>: By default, <code>import</code> and <code>export</code>
  declarations can only appear at a program's top level. Setting this
  option to <code>true</code> allows them anywhere where a statement is allowed.</p>
</li>
<li>
<p><strong>allowAwaitOutsideFunction</strong>: By default, <code>await</code> expressions can only appear inside <code>async</code> functions. Setting this option to <code>true</code> allows to have top-level <code>await</code> expressions. They are still not allowed in non-<code>async</code> functions, though.</p>
</li>
<li>
<p><strong>allowHashBang</strong>: When this is enabled (off by default), if the
  code starts with the characters <code>#!</code> (as in a shellscript), the
  first line will be treated as a comment.</p>
</li>
<li>
<p><strong>locations</strong>: When <code>true</code>, each node has a <code>loc</code> object attached
  with <code>start</code> and <code>end</code> subobjects, each of which contains the
  one-based line and zero-based column numbers in <code>{line, column}</code>
  form. Default is <code>false</code>.</p>
</li>
<li>
<p><strong>onToken</strong>: If a function is passed for this option, each found
  token will be passed in same format as tokens returned from
  <code>tokenizer().getToken()</code>.</p>
</li>
</ul>
<p>If array is passed, each found token is pushed to it.</p>
<p>Note that you are not allowed to call the parser from the
  callback—that will corrupt its internal state.</p>
<ul>
<li>
<p><strong>onComment</strong>: If a function is passed for this option, whenever a
  comment is encountered the function will be called with the
  following parameters:</p>
</li>
<li>
<p><code>block</code>: <code>true</code> if the comment is a block comment, false if it
    is a line comment.</p>
</li>
<li><code>text</code>: The content of the comment.</li>
<li><code>start</code>: Character offset of the start of the comment.</li>
<li><code>end</code>: Character offset of the end of the comment.</li>
</ul>
<p>When the <code>locations</code> options is on, the <code>{line, column}</code> locations
  of the comment’s start and end are passed as two additional
  parameters.</p>
<p>If array is passed for this option, each found comment is pushed
  to it as object in Esprima format:</p>
<p><code>javascript
  {
    "type": "Line" | "Block",
    "value": "comment text",
    "start": Number,
    "end": Number,
    // If `locations` option is on:
    "loc": {
      "start": {line: Number, column: Number}
      "end": {line: Number, column: Number}
    },
    // If `ranges` option is on:
    "range": [Number, Number]
  }</code></p>
<p>Note that you are not allowed to call the parser from the
  callback—that will corrupt its internal state.</p>
<ul>
<li>
<p><strong>ranges</strong>: Nodes have their start and end characters offsets
  recorded in <code>start</code> and <code>end</code> properties (directly on the node,
  rather than the <code>loc</code> object, which holds line/column data. To also
  add a <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=745678">semi-standardized</a> <code>range</code> property holding a
  <code>[start, end]</code> array with the same numbers, set the <code>ranges</code> option
  to <code>true</code>.</p>
</li>
<li>
<p><strong>program</strong>: It is possible to parse multiple files into a single
  AST by passing the tree produced by parsing the first file as the
  <code>program</code> option in subsequent parses. This will add the toplevel
  forms of the parsed file to the "Program" (top) node of an existing
  parse tree.</p>
</li>
<li>
<p><strong>sourceFile</strong>: When the <code>locations</code> option is <code>true</code>, you can pass
  this option to add a <code>source</code> attribute in every node’s <code>loc</code>
  object. Note that the contents of this option are not examined or
  processed in any way; you are free to use whatever format you
  choose.</p>
</li>
<li>
<p><strong>directSourceFile</strong>: Like <code>sourceFile</code>, but a <code>sourceFile</code> property
  will be added (regardless of the <code>location</code> option) directly to the
  nodes, rather than the <code>loc</code> object.</p>
</li>
<li>
<p><strong>preserveParens</strong>: If this option is <code>true</code>, parenthesized expressions
  are represented by (non-standard) <code>ParenthesizedExpression</code> nodes
  that have a single <code>expression</code> property containing the expression
  inside parentheses.</p>
</li>
</ul>
<p><strong>parseExpressionAt</strong><code>(input, offset, options)</code> will parse a single
expression in a string, and return its AST. It will not complain if
there is more of the string left after the expression.</p>
<p><strong>getLineInfo</strong><code>(input, offset)</code> can be used to get a <code>{line,
column}</code> object for a given program string and character offset.</p>
<p><strong>tokenizer</strong><code>(input, options)</code> returns an object with a <code>getToken</code>
method that can be called repeatedly to get the next token, a <code>{start,
end, type, value}</code> object (with added <code>loc</code> property when the
<code>locations</code> option is enabled and <code>range</code> property when the <code>ranges</code>
option is enabled). When the token's type is <code>tokTypes.eof</code>, you
should stop calling the method, since it will keep returning that same
token forever.</p>
<p>In ES6 environment, returned result can be used as any other
protocol-compliant iterable:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">token</span> <span class="k">of</span> <span class="nx">acorn</span><span class="p">.</span><span class="nx">tokenizer</span><span class="p">(</span><span class="nx">str</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// iterate over the tokens</span>
<span class="p">}</span>

<span class="c1">// transform code to array of tokens:</span>
<span class="kd">var</span> <span class="nx">tokens</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">acorn</span><span class="p">.</span><span class="nx">tokenizer</span><span class="p">(</span><span class="nx">str</span><span class="p">)];</span>
</pre></div>
</td></tr></table>

<p><strong>tokTypes</strong> holds an object mapping names to the token type objects
that end up in the <code>type</code> properties of tokens.</p>
<h4 id="note-on-using-with-escodegen">Note on using with <a href="https://github.com/estools/escodegen">Escodegen</a></h4>
<p>Escodegen supports generating comments from AST, attached in
Esprima-specific format. In order to simulate same format in
Acorn, consider following example:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">comments</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">tokens</span> <span class="o">=</span> <span class="p">[];</span>

<span class="kd">var</span> <span class="nx">ast</span> <span class="o">=</span> <span class="nx">acorn</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s1">&#39;var x = 42; // answer&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="c1">// collect ranges for each node</span>
    <span class="nx">ranges</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="c1">// collect comments in Esprima&#39;s format</span>
    <span class="nx">onComment</span><span class="o">:</span> <span class="nx">comments</span><span class="p">,</span>
    <span class="c1">// collect token ranges</span>
    <span class="nx">onToken</span><span class="o">:</span> <span class="nx">tokens</span>
<span class="p">});</span>

<span class="c1">// attach comments using collected information</span>
<span class="nx">escodegen</span><span class="p">.</span><span class="nx">attachComments</span><span class="p">(</span><span class="nx">ast</span><span class="p">,</span> <span class="nx">comments</span><span class="p">,</span> <span class="nx">tokens</span><span class="p">);</span>

<span class="c1">// generate code</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">escodegen</span><span class="p">.</span><span class="nx">generate</span><span class="p">(</span><span class="nx">ast</span><span class="p">,</span> <span class="p">{</span><span class="nx">comment</span><span class="o">:</span> <span class="kc">true</span><span class="p">}));</span>
<span class="c1">// &gt; &#39;var x = 42;    // answer&#39;</span>
</pre></div>
</td></tr></table>

<h3 id="distacorn_loosejs">dist/acorn_loose.js</h3>
<p>This file implements an error-tolerant parser. It exposes a single
function. The loose parser is accessible in node.js via <code>require("acorn/dist/acorn_loose")</code>.</p>
<p><strong>parse_dammit</strong><code>(input, options)</code> takes the same arguments and
returns the same syntax tree as the <code>parse</code> function in <code>acorn.js</code>,
but never raises an error, and will do its best to parse syntactically
invalid code in as meaningful a way as it can. It'll insert identifier
nodes with name <code>"✖"</code> as placeholders in places where it can't make
sense of the input. Depends on <code>acorn.js</code>, because it uses the same
tokenizer.</p>
<h3 id="distwalkjs">dist/walk.js</h3>
<p>Implements an abstract syntax tree walker. Will store its interface in
<code>acorn.walk</code> when loaded without a module system.</p>
<p><strong>simple</strong><code>(node, visitors, base, state)</code> does a 'simple' walk over
a tree. <code>node</code> should be the AST node to walk, and <code>visitors</code> an
object with properties whose names correspond to node types in the
<a href="https://github.com/estree/estree">ESTree spec</a>. The properties should contain functions
that will be called with the node object and, if applicable the state
at that point. The last two arguments are optional. <code>base</code> is a walker
algorithm, and <code>state</code> is a start state. The default walker will
simply visit all statements and expressions and not produce a
meaningful state. (An example of a use of state is to track scope at
each point in the tree.)</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">acorn</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;acorn&quot;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">walk</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;acorn/dist/walk&quot;</span><span class="p">)</span>

<span class="nx">walk</span><span class="p">.</span><span class="nx">simple</span><span class="p">(</span><span class="nx">acorn</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;let x = 10&quot;</span><span class="p">),</span> <span class="p">{</span>
  <span class="nx">Literal</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Found a literal: </span><span class="si">${</span><span class="nx">node</span><span class="p">.</span><span class="nx">value</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</td></tr></table>

<p><strong>ancestor</strong><code>(node, visitors, base, state)</code> does a 'simple' walk over
a tree, building up an array of ancestor nodes (including the current node)
and passing the array to the callbacks as a third parameter.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">acorn</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;acorn&quot;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">walk</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;acorn/dist/walk&quot;</span><span class="p">)</span>

<span class="nx">walk</span><span class="p">.</span><span class="nx">ancestor</span><span class="p">(</span><span class="nx">acorn</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;foo(&#39;hi&#39;)&quot;</span><span class="p">),</span> <span class="p">{</span>
  <span class="nx">Literal</span><span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">ancestors</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;This literal&#39;s ancestors are:&quot;</span><span class="p">,</span>
                <span class="nx">ancestors</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">n</span> <span class="p">=&gt;</span> <span class="nx">n</span><span class="p">.</span><span class="nx">type</span><span class="p">))</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</td></tr></table>

<p><strong>recursive</strong><code>(node, state, functions, base)</code> does a 'recursive'
walk, where the walker functions are responsible for continuing the
walk on the child nodes of their target node. <code>state</code> is the start
state, and <code>functions</code> should contain an object that maps node types
to walker functions. Such functions are called with <code>(node, state, c)</code>
arguments, and can cause the walk to continue on a sub-node by calling
the <code>c</code> argument on it with <code>(node, state)</code> arguments. The optional
<code>base</code> argument provides the fallback walker functions for node types
that aren't handled in the <code>functions</code> object. If not given, the
default walkers will be used.</p>
<p><strong>make</strong><code>(functions, base)</code> builds a new walker object by using the
walker functions in <code>functions</code> and filling in the missing ones by
taking defaults from <code>base</code>.</p>
<p><strong>full</strong><code>(node, callback, base, state)</code> does a 'full'
walk over a tree, calling the callback with the arguments (node, state, type)
for each node</p>
<p><strong>fullAncestor</strong><code>(node, callback, base, state)</code> does a 'full' walk over
a tree, building up an array of ancestor nodes (including the current node)
and passing the array to the callbacks as a third parameter.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">acorn</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;acorn&quot;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">walk</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;acorn/dist/walk&quot;</span><span class="p">)</span>

<span class="nx">walk</span><span class="p">.</span><span class="nx">full</span><span class="p">(</span><span class="nx">acorn</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 + 1&quot;</span><span class="p">),</span> <span class="nx">node</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`There&#39;s a </span><span class="si">${</span><span class="nx">node</span><span class="p">.</span><span class="nx">type</span><span class="si">}</span><span class="sb"> node at </span><span class="si">${</span><span class="nx">node</span><span class="p">.</span><span class="nx">ch</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</td></tr></table>

<p><strong>findNodeAt</strong><code>(node, start, end, test, base, state)</code> tries to
locate a node in a tree at the given start and/or end offsets, which
satisfies the predicate <code>test</code>. <code>start</code> and <code>end</code> can be either <code>null</code>
(as wildcard) or a number. <code>test</code> may be a string (indicating a node
type) or a function that takes <code>(nodeType, node)</code> arguments and
returns a boolean indicating whether this node is interesting. <code>base</code>
and <code>state</code> are optional, and can be used to specify a custom walker.
Nodes are tested from inner to outer, so if two nodes match the
boundaries, the inner one will be preferred.</p>
<p><strong>findNodeAround</strong><code>(node, pos, test, base, state)</code> is a lot like
<code>findNodeAt</code>, but will match any node that exists 'around' (spanning)
the given position.</p>
<p><strong>findNodeAfter</strong><code>(node, pos, test, base, state)</code> is similar to
<code>findNodeAround</code>, but will match all nodes <em>after</em> the given position
(testing outer nodes before inner nodes).</p>
<h2 id="command-line-interface">Command line interface</h2>
<p>The <code>bin/acorn</code> utility can be used to parse a file from the command
line. It accepts as arguments its input file and the following
options:</p>
<ul>
<li>
<p><code>--ecma3|--ecma5|--ecma6|--ecma7|--ecma8|--ecma9|--ecma10</code>: Sets the ECMAScript version
  to parse. Default is version 7.</p>
</li>
<li>
<p><code>--module</code>: Sets the parsing mode to <code>"module"</code>. Is set to <code>"script"</code> otherwise.</p>
</li>
<li>
<p><code>--locations</code>: Attaches a "loc" object to each node with "start" and
  "end" subobjects, each of which contains the one-based line and
  zero-based column numbers in <code>{line, column}</code> form.</p>
</li>
<li>
<p><code>--allow-hash-bang</code>: If the code starts with the characters #! (as in a shellscript), the first line will be treated as a comment.</p>
</li>
<li>
<p><code>--compact</code>: No whitespace is used in the AST output.</p>
</li>
<li>
<p><code>--silent</code>: Do not output the AST, just return the exit status.</p>
</li>
<li>
<p><code>--help</code>: Print the usage information and quit.</p>
</li>
</ul>
<p>The utility spits out the syntax tree as JSON data.</p>
<h2 id="build-system">Build system</h2>
<p>Acorn is written in ECMAScript 6, as a set of small modules, in the
project's <code>src</code> directory, and compiled down to bigger ECMAScript 3
files in <code>dist</code> using <a href="http://browserify.org">Browserify</a> and
<a href="http://babeljs.io/">Babel</a>. If you are already using Babel, you can
consider including the modules directly.</p>
<p>The command-line test runner (<code>npm test</code>) uses the ES6 modules. The
browser-based test page (<code>test/index.html</code>) uses the compiled modules.
The <code>bin/build-acorn.js</code> script builds the latter from the former.</p>
<p>If you are working on Acorn, you'll probably want to try the code out
directly, without an intermediate build step. In your scripts, you can
register the Babel require shim like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>require(&quot;babel-core/register&quot;)
</pre></div>
</td></tr></table>

<p>That will allow you to directly <code>require</code> the ES6 modules.</p>
<h2 id="plugins">Plugins</h2>
<p>Acorn is designed support allow plugins which, within reasonable
bounds, redefine the way the parser works. Plugins can add new token
types and new tokenizer contexts (if necessary), and extend methods in
the parser object. This is not a clean, elegant API—using it requires
an understanding of Acorn's internals, and plugins are likely to break
whenever those internals are significantly changed. But still, it is
<em>possible</em>, in this way, to create parsers for JavaScript dialects
without forking all of Acorn. And in principle it is even possible to
combine such plugins, so that if you have, for example, a plugin for
parsing types and a plugin for parsing JSX-style XML literals, you
could load them both and parse code with both JSX tags and types.</p>
<p>A plugin should register itself by adding a property to
<code>acorn.plugins</code>, which holds a function. Calling <code>acorn.parse</code>, a
<code>plugins</code> option can be passed, holding an object mapping plugin names
to configuration values (or just <code>true</code> for plugins that don't take
options). After the parser object has been created, the initialization
functions for the chosen plugins are called with <code>(parser,
configValue)</code> arguments. They are expected to use the <code>parser.extend</code>
method to extend parser methods. For example, the <code>readToken</code> method
could be extended like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nx">parser</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s2">&quot;readToken&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">nextMethod</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">code</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Reading a token!&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">nextMethod</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">code</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</td></tr></table>

<p>The <code>nextMethod</code> argument passed to <code>extend</code>'s second argument is the
previous value of this method, and should usually be called through to
whenever the extended method does not handle the call itself.</p>
<p>Similarly, the loose parser allows plugins to register themselves via
<code>acorn.pluginsLoose</code>.  The extension mechanism is the same as for the
normal parser:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nx">looseParser</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s2">&quot;readToken&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">nextMethod</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Reading a token in the loose parser!&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">nextMethod</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</td></tr></table>

<h3 id="existing-plugins">Existing plugins</h3>
<ul>
<li><a href="https://github.com/RReverser/acorn-jsx"><code>acorn-jsx</code></a>: Parse <a href="https://github.com/facebook/jsx">Facebook JSX syntax extensions</a></li>
<li><a href="https://github.com/cappuccino/acorn-objj"><code>acorn-objj</code></a>: <a href="http://www.cappuccino-project.org/learn/objective-j.html">Objective-J</a> language parser built as Acorn plugin</li>
</ul>
<p>Plugins for ECMAScript proposals:</p>
<ul>
<li><a href="https://github.com/acornjs/acorn-stage3"><code>acorn-stage3</code></a>: Parse most stage 3 proposals, bundling:</li>
<li><a href="https://github.com/acornjs/acorn-async-iteration"><code>acorn-async-iteration</code></a>: Parse <a href="https://github.com/tc39/proposal-async-iteration">async iteration proposal</a></li>
<li><a href="https://github.com/acornjs/acorn-bigint"><code>acorn-bigint</code></a>: Parse <a href="https://github.com/tc39/proposal-bigint">BigInt proposal</a></li>
<li><a href="https://github.com/acornjs/acorn-class-fields"><code>acorn-class-fields</code></a>: Parse <a href="https://github.com/tc39/proposal-class-fields">class fields proposal</a></li>
<li><a href="https://github.com/kesne/acorn-dynamic-import"><code>acorn-dynamic-import</code></a>: Parse <a href="https://github.com/tc39/proposal-dynamic-import">import() proposal</a></li>
<li><a href="https://github.com/acornjs/acorn-import-meta"><code>acorn-import-meta</code></a>: Parse <a href="https://github.com/tc39/proposal-import-meta">import.meta proposal</a></li>
<li><a href="https://github.com/acornjs/acorn-numeric-separator"><code>acorn-numeric-separator</code></a>: Parse <a href="https://github.com/tc39/proposal-numeric-separator">numeric separator proposal</a></li>
<li><a href="https://github.com/acornjs/acorn-optional-catch-binding"><code>acorn-optional-catch-binding</code></a>: Parse <a href="https://github.com/tc39/proposal-optional-catch-binding">optional catch binding proposal</a></li>
<li><a href="https://github.com/acornjs/acorn-private-methods"><code>acorn-private-methods</code></a>: parse <a href="https://github.com/tc39/proposal-private-methods">private methods, getters and setters proposal</a></li>
<li><a href="https://github.com/adrianheine/acorn5-object-spread"><code>acorn5-object-spread</code></a>: Parse <a href="https://github.com/tc39/proposal-object-rest-spread">Object Rest/Spread Properties proposal</a></li>
<li><a href="https://github.com/victor-homyakov/acorn-object-rest-spread"><code>acorn-object-rest-spread</code></a>: Parse <a href="https://github.com/tc39/proposal-object-rest-spread">Object Rest/Spread Properties proposal</a></li>
<li><a href="https://github.com/angelozerr/acorn-es7"><code>acorn-es7</code></a>: Parse <a href="https://github.com/wycats/javascript-decorators">decorator syntax proposal</a></li>
<li><a href="https://github.com/victor-homyakov/acorn-static-class-property-initializer"><code>acorn-static-class-property-initializer</code></a>: Partial support for static class properties from <a href="https://github.com/tc39/proposal-class-public-fields">ES Class Fields &amp; Static Properties Proposal</a> to support static property initializers in <a href="https://babeljs.io/blog/2015/07/07/react-on-es6-plus">React components written as ES6+ classes</a></li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.583bbe55.js"></script>
      
        
        
          
          <script src="../../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../../../../assets/javascripts/lunr/lunr.es.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../../.."}})</script>
      
    
    
      
    
  </body>
</html>